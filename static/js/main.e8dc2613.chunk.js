(this["webpackJsonpteris-test"]=this["webpackJsonpteris-test"]||[]).push([[0],{18:function(t,e,n){t.exports=n(35)},25:function(t,e,n){},30:function(t,e,n){},35:function(t,e,n){"use strict";n.r(e);var r=n(0),o=n.n(r),i=n(11),a=n.n(i),c=(n(23),n(24),n(25),n(2)),l=n(8),u=n(5),s=n(4),p=n(3);function f(){var t=Object(s.a)(["\n  width: ","px;\n  height: ","px;\n  position: absolute;\n  background: ",";\n  transition: left .3s ease, top .15s ease;\n  opacity: ",";\n  animation: "," 0.45s cubic-bezier(0.165, 0.840, 0.440, 1.000) both;\n"]);return f=function(){return t},t}function h(){var t=Object(s.a)(["\n  width: ","px;\n  height: ","px;\n  position: relative;\n  background-color: ",";\n  margin: auto;\n  animation: "," 0.3s linear;\n  overflow: hidden;\n"]);return h=function(){return t},t}function d(){var t=Object(s.a)(["\n  0% {\n    transform: scale(1);\n    filter: blur(0px);\n    opacity: 1;\n  }\n  100% {\n    transform: scale(2);\n    filter: blur(4px);\n    opacity: 0;\n  }\n"]);return d=function(){return t},t}function S(){var t=Object(s.a)(["\n  0% {\n    transform: translate(0);\n  }\n  20% {\n    transform: translate(-2px, 2px);\n  }\n  40% {\n    transform: translate(-2px, -2px);\n  }\n  60% {\n    transform: translate(2px, 2px);\n  }\n  80% {\n    transform: translate(2px, -2px);\n  }\n  100% {\n    transform: translate(0);\n  }\n"]);return S=function(){return t},t}var b,m=Object(p.c)(S()),g=Object(p.c)(d()),v={MainBoard:p.b.div(h(),(function(t){return t.cellSize*t.columns}),(function(t){return t.cellSize*t.rows}),(function(t){return t.theme.backgroundMainBoard}),(function(t){return t.isShake&&m})),MainBoard__cell:p.b.div.attrs((function(t){return{style:{top:t.position.top&&t.position.top*t.cellSize+"px",left:t.position.left&&t.position.left*t.cellSize+"px",right:t.position.right&&t.position.right*t.cellSize+"px",bottom:t.position.bottom&&t.position.bottom*t.cellSize+"px"}}}))(f(),(function(t){return t.cellSize}),(function(t){return t.cellSize}),(function(t){return t.position.color}),(function(t){return t.isShadow?.2:1}),(function(t){return t.position.isDestroying&&g}))},O=function(t){return o.a.createElement(v.MainBoard,Object.assign({},t.gameSettings,{isShake:t.isShake,onAnimationEnd:function(){return t.setShake(!1)}}),t.cellsPosition.map((function(e){return o.a.createElement(v.MainBoard__cell,Object.assign({key:e.id},t.gameSettings,{position:e}))})),t.shadowShapePosition.map((function(e){return o.a.createElement(v.MainBoard__cell,Object.assign({key:"shadow-".concat(e.id)},t.gameSettings,{position:e,isShadow:!0}))})))},x=(n(30),n(6)),j={t:{0:{matrix:[[1,1,1],[0,1,0]],center:[0,1]},1:{matrix:[[0,1],[1,1],[0,1]],center:[1,1]},2:{matrix:[[0,1,0],[1,1,1]],center:[1,1]},3:{matrix:[[1,0],[1,1],[1,0]],center:[1,0]}},l:{0:{matrix:[[1,1,1],[0,0,1]],center:[0,1]},1:{matrix:[[0,1],[0,1],[1,1]],center:[1,1]},2:{matrix:[[1,0,0],[1,1,1]],center:[1,1]},3:{matrix:[[1,1],[1,0],[1,0]],center:[1,0]}},i:{0:{matrix:[[1,1,1,1]],center:[0,1]},1:{matrix:[[1],[1],[1],[1]],center:[1,0]}},o:{0:{matrix:[[1,1],[1,1]],center:[0,0]}},j:{0:{matrix:[[1,1,1],[1,0,0]],center:[0,1]},1:{matrix:[[1,1],[0,1],[0,1]],center:[1,1]},2:{matrix:[[0,0,1],[1,1,1]],center:[1,1]},3:{matrix:[[1,0],[1,0],[1,1]],center:[1,0]}},z:{0:{matrix:[[1,1,0],[0,1,1]],center:[0,1]},1:{matrix:[[0,1],[1,1],[1,0]],center:[1,1]},2:{matrix:[[1,1,0],[0,1,1]],center:[1,1]},3:{matrix:[[0,1],[1,1],[1,0]],center:[1,0]}},s:{0:{matrix:[[0,1,1],[1,1,0]],center:[0,1]},1:{matrix:[[1,0],[1,1],[0,1]],center:[1,1]},2:{matrix:[[0,1,1],[1,1,0]],center:[1,1]},3:{matrix:[[1,0],[1,1],[0,1]],center:[1,0]}}},y={cellSize:25,columns:16,rows:24,fallSpeed:500,controlSpeed:60,fps:60,delayTime:50},P=["#A848E3","#E4E250","#F6A8DE","#ABE124","#D04D41","#F20B35","#2ED8DB","#1708EF","#F6847E","#FCB01E","#39FBBD","#6FFA14"],k=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:y.columns/2-1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4?arguments[4]:void 0,i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=P[Math.round(Math.random()*(P.length-1))],c=j[t],l=c[e],u=l.center,s=e-1>=0?e-1:Object.keys(c).length-1,p=c[s],f=p.center,h=0,d=0;i&&(h=f[0]-u[0],d=f[1]-u[1]);for(var S=l.matrix,b=[],m=0;m<S.length;m++)for(var g=S[m],v=0;v<g.length;v++){var O=g[v];1===O&&b.push({top:r+m+h,left:n+v+d,isFalling:!0,userControl:!0,direction:e,color:o||a,id:Object(x.uniqueId)(Object(x.uniqueId)("shape-")+"-")})}return b},W=n(37),w={backgroundWrapper:["#fff","#222831"],backgroundMainBoard:["#eeeeee","#393e46"],title:["#00adb5","#00adb5"],mainHeading:["#00adb5","#00adb5"],textColor:["#222831","#eeeeee"]},E=n(7),M="light",C="dark",D=(b={},Object(E.a)(b,M,0),Object(E.a)(b,C,1),b),B=function(t){var e={},n=D[t];return Object.keys(w).forEach((function(t){e[t]=w[t][n]})),e};function F(){var t=Object(s.a)(["\n  color: ",";\n"]);return F=function(){return t},t}function z(){var t=Object(s.a)(["\n  position: fixed;\n  top: 10px;\n  right: 10px;\n"]);return z=function(){return t},t}function I(){var t=Object(s.a)(["\n  color: ",";\n"]);return I=function(){return t},t}function A(){var t=Object(s.a)(["\n  background-color: ",";\n  min-height: 100vh;\n  font-family: 'Righteous', cursive;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  position: relative;\n"]);return A=function(){return t},t}var L=p.b.div(A(),(function(t){return t.theme.backgroundWrapper})),G=p.b.h1(I(),(function(t){return t.theme.mainHeading})),R=p.b.div(z()),_=p.b.span(F(),(function(t){return t.theme.textColor})),N=function(){var t=Object.keys(j),e=t[Object(x.random)(t.length-1)];return{currentShape:e,currentDirection:Object(x.random)(Object.keys(j[e]).length-1)}},T=function(t){var e=Object(x.cloneDeep)(t),n=e.filter((function(t){return!t.userControl&&!t.isFalling}));return{cellPositionWithShape:e.filter((function(t){return t.userControl&&t.isFalling})),cellPositionWithoutShape:n}},q=function(t,e){var n=e.filter((function(e){return function(t,e){return t.filter((function(t){return t.top+1===e.top&&t.left===e.left})).length>0}(t,e)})).length>0,r=t.filter((function(t){return t.top+1===y.rows})).length>0,o=n||r,i=e.filter((function(e){return function(t,e){return t.filter((function(t){return t.top===e.top&&t.left-1===e.left})).length>0}(t,e)})).length>0,a=t.filter((function(t){return t.left-1<0})).length>0,c=i||a,l=e.filter((function(e){return function(t,e){return t.filter((function(t){return t.top===e.top&&t.left+1===e.left})).length>0}(t,e)})).length>0,u=t.filter((function(t){return t.left+1>=y.columns})).length>0;return{isBottomCollusion:o,isLeftCollusion:c,isRightCollusion:l||u,isOverlapsed:t.filter((function(t){return t.left<0||t.left>=y.columns||t.top>=y.rows||e.filter((function(e){return e.left===t.left&&e.top===t.top})).length>0})).length>0}},H=function(t){if(0===t.length)return{};var e=t[0].left,n=t[0].top,r=t[0].left,o=t[0].top;return t.forEach((function(t){t.left<e&&(e=t.left),t.top<n&&(n=t.top),t.left>r&&(r=t.left),t.top>o&&(o=t.top)})),{xMin:e,yMin:n,xMax:r,yMax:o,color:t[0].color}},J=function(t,e,n){var r=H(t),o=e.filter((function(t){return t.left>=r.xMin&&t.left<=r.xMax})),i=H(o);if(!i.yMin||!i.yMax)return k(n.currentShape,n.currentDirection,r.xMin,y.rows-1-(r.yMax-r.yMin),r.color);for(var a=[],c=i.yMin-(r.yMax-r.yMin+1);c<i.yMin+(r.yMax-r.yMin);c++){var l=k(n.currentShape,n.currentDirection,r.xMin,c,r.color);if(q(l,o).isBottomCollusion){a=l;break}}return a},X=function(t){var e=Object.keys(Object(x.keyBy)(t.filter((function(t){return t.isDestroying})),(function(t){return t.top}))).reverse();t=t.filter((function(t){return!t.isDestroying}));for(var n=[],r=function(r){var o=t.filter((function(t){return t.top===r}));if(0===o.length)return"continue";var i=e.filter((function(t){return r<t})).length,a=o.map((function(t){return Object(u.a)({},t,{top:t.top+i})}));n.push.apply(n,Object(c.a)(a))},o=y.rows-1;o>0;o--)r(o);return n},$=N,K=T,Q=q,U=J,V=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n={},r=[],o=T([].concat(Object(c.a)(t),Object(c.a)(e))),i=o.cellPositionWithShape,a=o.cellPositionWithoutShape,l=Object(c.a)(a);return l.forEach((function(t){n[t.top]?n[t.top]+=1:n[t.top]=1})),Object.keys(n).forEach((function(t){n[t]===y.columns&&r.push(parseInt(t))})),r.length>0?(l=l.map((function(t){return Object(u.a)({},t,{isDestroying:r.includes(t.top)})})),[].concat(Object(c.a)(l),Object(c.a)(i))):[].concat(Object(c.a)(a),Object(c.a)(i))},Y=function(t,e,n,r,o){if(!t.isBottomCollusion||t.isBottomCollusion&&!e.isPrepareOnGround){if(!t.isLeftCollusion&&n.left&&n.controlSpeedStep>=y.controlSpeed)r.cellPositionWithShape=r.cellPositionWithShape.map((function(t){return Object(u.a)({},t,{left:t.left-1})})),o(J(r.cellPositionWithShape,r.cellPositionWithoutShape,e)),n.controlSpeedStep=0;if(!t.isRightCollusion&&n.right&&n.controlSpeedStep>=y.controlSpeed)r.cellPositionWithShape=r.cellPositionWithShape.map((function(t){return Object(u.a)({},t,{left:t.left+1})})),o(J(r.cellPositionWithShape,r.cellPositionWithoutShape,e)),n.controlSpeedStep=0}},Z=function(t,e,n,r,o,i,a){if(n.down){var l;r.isCaculatePoint=!0;var s=e.map((function(e,n){return Object(u.a)({},e,{isFalling:!1,userControl:!1,id:t.cellPositionWithShape[n].id})}));t.cellPositionWithShape=s;var p=N();o.currentShape=p.currentShape,o.currentDirection=p.currentDirection;var f=k(o.currentShape,o.currentDirection),h=J(f,[].concat(Object(c.a)(t.cellPositionWithoutShape),Object(c.a)(t.cellPositionWithShape)),o);(l=t.cellPositionWithShape).push.apply(l,Object(c.a)(f)),i(h),a(!0),n.down=!1}},tt=function(t,e,n,r){if(e.rotate&&e.controlSpeedStep>=y.controlSpeed){e.controlSpeedStep=0;var o=(n.currentDirection+1)%Object.keys(j[n.currentShape]).length,i=H(t.cellPositionWithShape),a=i.xMin,l=i.yMin,u=i.color,s=function(t){var e=T(t),n=e.cellPositionWithShape,r=e.cellPositionWithoutShape;return q(n,r).isOverlapsed?null:n}([].concat(Object(c.a)(t.cellPositionWithoutShape),Object(c.a)(k(n.currentShape,o,a,l,u,!0))));if(null!==s)n.currentDirection=o,t.cellPositionWithShape=s,r(J(t.cellPositionWithShape,t.cellPositionWithoutShape,n))}},et=function(t,e,n,r,o){if(t.cellPositionWithoutShape.filter((function(t){return t.isDestroying})).length>0){if(e.delayStep>=y.delayTime){t.cellPositionWithoutShape=X(t.cellPositionWithoutShape),r(J(t.cellPositionWithShape,t.cellPositionWithoutShape,n));var i=[].concat(Object(c.a)(t.cellPositionWithoutShape),Object(c.a)(t.cellPositionWithShape));return e.delayStep=0,o(i)}e.delayStep+=y.fps}},nt=function(t,e,n,r,o){if(e.fallStep+=y.fps,e.fallStep>=y.fallSpeed)if(e.fallStep=0,n.isBottomCollusion)if(r.isPrepareOnGround){var i;e.isCaculatePoint=!0,t.cellPositionWithShape=t.cellPositionWithShape.map((function(t){return Object(u.a)({},t,{isFalling:!1,userControl:!1})}));var a=N();r.currentShape=a.currentShape,r.currentDirection=a.currentDirection;var l=k(r.currentShape,r.currentDirection),s=J(l,[].concat(Object(c.a)(t.cellPositionWithoutShape),Object(c.a)(t.cellPositionWithShape)),r);(i=t.cellPositionWithShape).push.apply(i,Object(c.a)(l)),o(s),r.isPrepareOnGround=!1}else r.isPrepareOnGround=!0;else t.cellPositionWithShape=t.cellPositionWithShape.map((function(t){return Object(u.a)({},t,{isFalling:!0,top:t.top+1})})),r.isPrepareOnGround=!1};function rt(){var t=Object(s.a)(["\n  display: none;\n\n  &:focus + ","{\n    box-shadow: 0 0 1px #2196F3;\n  }\n\n  &:checked + ",":before {\n    transform: translateX(16px);\n  }\n"]);return rt=function(){return t},t}function ot(){var t=Object(s.a)(["\n  position: absolute;\n  cursor: pointer;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: ",';\n  -webkit-transition: .4s;\n  transition: .4s;\n  border-radius: 34px;\n\n  &:before{\n    position: absolute;\n    content: "";\n    height: 18px;\n    width: 18px;\n    left: 3px;\n    bottom: 3px;\n    background-color: white;\n    transition: .4s;\n    border-radius: 50%;\n  }\n']);return ot=function(){return t},t}function it(){var t=Object(s.a)(["\n  position: relative;\n  display: inline-block;\n  width: 40px;\n  height: 24px;\n  margin: 0;\n"]);return it=function(){return t},t}var at=p.b.label(it()),ct=p.b.div(ot(),(function(t){return t.value?"#1E81AE":"#ccc"})),lt=p.b.input(rt(),ct,ct),ut=function(t){return o.a.createElement(at,null,o.a.createElement(lt,Object.assign({},t,{type:"checkbox",disabled:t.readOnly})),o.a.createElement(ct,{value:t.value}))},st=function(t){return o.a.createElement(R,null,o.a.createElement("div",{className:"d-flex align-items-center"},o.a.createElement(_,{className:"mr-2"},"Light:"),o.a.createElement(ut,t)))},pt={fallStep:0,isCaculatePoint:!1,delayStep:0},ft=Object(u.a)({isPrepareOnGround:!1},$()),ht=k(ft.currentShape,ft.currentDirection),dt={left:!1,right:!1,rotate:!1,down:!1,controlSpeedStep:y.controlSpeed};var St=function(){var t=Object(r.useState)(ht),e=Object(l.a)(t,2),n=e[0],i=e[1],a=Object(r.useState)(!1),u=Object(l.a)(a,2),s=u[0],f=u[1],h=Object(r.useState)(U(ht,[],ft)),d=Object(l.a)(h,2),S=d[0],b=d[1];Object(r.useEffect)((function(){var t=setInterval((function(){var t=K(n);et(t,pt,ft,b,i);var e=Q(t.cellPositionWithShape,t.cellPositionWithoutShape);Y(e,ft,dt,t,b),nt(t,pt,e,ft,b),Z(t,S,dt,pt,ft,b,f),tt(t,dt,ft,b);var r=[].concat(Object(c.a)(t.cellPositionWithoutShape),Object(c.a)(t.cellPositionWithShape));pt.isCaculatePoint&&(r=V(r),pt.isCaculatePoint=!1),i(r)}),y.fps);return function(){clearInterval(t)}}),[n,S]);var m=function(t){switch(t.keyCode){case 37:dt.left=!0,dt.controlSpeedStep+=y.fps;break;case 39:dt.right=!0,dt.controlSpeedStep+=y.fps;break;case 38:dt.rotate=!0,dt.controlSpeedStep+=y.fps;break;case 40:dt.down=!0}},g=function(t){switch(t.keyCode){case 37:dt.left=!1,dt.controlSpeedStep=y.controlSpeed;break;case 39:dt.right=!1,dt.controlSpeedStep=y.controlSpeed;break;case 38:dt.rotate=!1,dt.controlSpeedStep+=y.controlSpeed}};Object(r.useEffect)((function(){return window.addEventListener("keydown",m),window.addEventListener("keyup",g),function(){window.removeEventListener("keydown",m),window.addEventListener("keyup",g)}}),[]);var v=Object(r.useState)(localStorage.getItem("theme")||M),x=Object(l.a)(v,2),j=x[0],P=x[1],k=j===M;return o.a.createElement(p.a,{theme:B(j)},o.a.createElement(L,null,o.a.createElement(st,{value:k,onChange:function(){var t=j!==M?M:C;localStorage.setItem("theme",t),P(t)},isReadOnly:!0}),o.a.createElement(W.a,{className:"App"},o.a.createElement(G,{className:"text-center"},"TERIS RACE"),o.a.createElement(O,{gameSettings:y,cellsPosition:n,shadowShapePosition:S,isShake:s,setShake:f}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(o.a.createElement(St,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[18,1,2]]]);
//# sourceMappingURL=main.e8dc2613.chunk.js.map