(this["webpackJsonpteris-test"]=this["webpackJsonpteris-test"]||[]).push([[0],{23:function(e,t,n){e.exports=n(40)},30:function(e,t,n){},35:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),i=n(16),a=n.n(i),c=(n(28),n(29),n(30),n(2)),l=n(10),u=n(5),s=n(4),p=n(3);function f(){var e=Object(s.a)(["\n  width: ","px;\n  height: ","px;\n  position: absolute;\n  background: ",";\n  transition: left .3s ease, top .15s ease;\n  opacity: ",";\n  animation: "," 0.45s cubic-bezier(0.165, 0.840, 0.440, 1.000) both;\n"]);return f=function(){return e},e}function h(){var e=Object(s.a)(["\n  width: ","px;\n  height: ","px;\n  position: relative;\n  background-color: ",";\n  margin: auto;\n  animation: "," 0.3s linear;\n  overflow: hidden;\n"]);return h=function(){return e},e}function d(){var e=Object(s.a)(["\n  0% {\n    transform: scale(1);\n    filter: blur(0px);\n    opacity: 1;\n  }\n  100% {\n    transform: scale(2);\n    filter: blur(4px);\n    opacity: 0;\n  }\n"]);return d=function(){return e},e}function m(){var e=Object(s.a)(["\n  0% {\n    transform: translate(0);\n  }\n  20% {\n    transform: translate(-2px, 2px);\n  }\n  40% {\n    transform: translate(-2px, -2px);\n  }\n  60% {\n    transform: translate(2px, 2px);\n  }\n  80% {\n    transform: translate(2px, -2px);\n  }\n  100% {\n    transform: translate(0);\n  }\n"]);return m=function(){return e},e}var S,b=Object(p.c)(m()),g=Object(p.c)(d()),v={MainBoard:p.b.div(h(),(function(e){return e.cellSize*e.columns}),(function(e){return e.cellSize*e.rows}),(function(e){return e.theme.backgroundMainBoard}),(function(e){return e.isShake&&b})),MainBoard__cell:p.b.div.attrs((function(e){return{style:{top:e.position.top&&e.position.top*e.cellSize+"px",left:e.position.left&&e.position.left*e.cellSize+"px",right:e.position.right&&e.position.right*e.cellSize+"px",bottom:e.position.bottom&&e.position.bottom*e.cellSize+"px"}}}))(f(),(function(e){return e.cellSize}),(function(e){return e.cellSize}),(function(e){return e.position.color}),(function(e){return e.isShadow?.2:1}),(function(e){return e.position.isDestroying&&g}))},x=function(e){var t=Object(o.useRef)(null),n=!!(window.innerWidth<=991&&t.current)&&t.current.clientWidth,i=n?(n-30)/e.gameSettings.columns:e.gameSettings.cellSize,a=Object(u.a)({},e.gameSettings,{cellSize:i});return r.a.createElement("div",{ref:t},r.a.createElement(v.MainBoard,Object.assign({},a,{isShake:e.isShake,onAnimationEnd:function(){return e.setShake(!1)}}),e.cellsPosition.map((function(e){return r.a.createElement(v.MainBoard__cell,Object.assign({key:e.id},a,{position:e}))})),e.shadowShapePosition.map((function(e){return r.a.createElement(v.MainBoard__cell,Object.assign({key:"shadow-".concat(e.id)},a,{position:e,isShadow:!0}))}))))},O=(n(35),n(6)),j={t:{0:{matrix:[[1,1,1],[0,1,0]],center:[0,1]},1:{matrix:[[0,1],[1,1],[0,1]],center:[1,1]},2:{matrix:[[0,1,0],[1,1,1]],center:[1,1]},3:{matrix:[[1,0],[1,1],[1,0]],center:[1,0]}},l:{0:{matrix:[[1,1,1],[0,0,1]],center:[0,1]},1:{matrix:[[0,1],[0,1],[1,1]],center:[1,1]},2:{matrix:[[1,0,0],[1,1,1]],center:[1,1]},3:{matrix:[[1,1],[1,0],[1,0]],center:[1,0]}},i:{0:{matrix:[[1,1,1,1]],center:[0,1]},1:{matrix:[[1],[1],[1],[1]],center:[1,0]}},o:{0:{matrix:[[1,1],[1,1]],center:[0,0]}},j:{0:{matrix:[[1,1,1],[1,0,0]],center:[0,1]},1:{matrix:[[1,1],[0,1],[0,1]],center:[1,1]},2:{matrix:[[0,0,1],[1,1,1]],center:[1,1]},3:{matrix:[[1,0],[1,0],[1,1]],center:[1,0]}},z:{0:{matrix:[[1,1,0],[0,1,1]],center:[0,1]},1:{matrix:[[0,1],[1,1],[1,0]],center:[1,1]},2:{matrix:[[1,1,0],[0,1,1]],center:[1,1]},3:{matrix:[[0,1],[1,1],[1,0]],center:[1,0]}},s:{0:{matrix:[[0,1,1],[1,1,0]],center:[0,1]},1:{matrix:[[1,0],[1,1],[0,1]],center:[1,1]},2:{matrix:[[0,1,1],[1,1,0]],center:[1,1]},3:{matrix:[[1,0],[1,1],[0,1]],center:[1,0]}}},y={cellSize:25,columns:16,rows:24,fallSpeed:500,controlSpeed:60,fps:60,delayTime:50},E=["#A848E3","#E4E250","#F6A8DE","#ABE124","#D04D41","#F20B35","#2ED8DB","#1708EF","#F6847E","#FCB01E","#39FBBD","#6FFA14"],P=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:y.columns/2-1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4?arguments[4]:void 0,i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=E[Math.round(Math.random()*(E.length-1))],c=j[e],l=c[t],u=l.center,s=t-1>=0?t-1:Object.keys(c).length-1,p=c[s],f=p.center,h=0,d=0;i&&(h=f[0]-u[0],d=f[1]-u[1]);for(var m=l.matrix,S=[],b=0;b<m.length;b++)for(var g=m[b],v=0;v<g.length;v++){var x=g[v];1===x&&S.push({top:o+b+h,left:n+v+d,isFalling:!0,userControl:!0,direction:t,color:r||a,id:Object(O.uniqueId)(Object(O.uniqueId)("shape-")+"-")})}return S},k=n(41),w={backgroundWrapper:["#fff","#222831"],backgroundMainBoard:["#eeeeee","#393e46"],title:["#00adb5","#00adb5"],mainHeading:["#00adb5","#00adb5"],textColor:["#222831","#eeeeee"]},W=n(8),C="light",M="dark",D=(S={},Object(W.a)(S,C,0),Object(W.a)(S,M,1),S),B=function(e){var t={},n=D[e];return Object.keys(w).forEach((function(e){t[e]=w[e][n]})),t};function F(){var e=Object(s.a)(["\n  color: ",";\n"]);return F=function(){return e},e}function z(){var e=Object(s.a)(["\n  position: fixed;\n  top: 10px;\n  right: 10px;\n"]);return z=function(){return e},e}function T(){var e=Object(s.a)(["\n  color: ",";\n"]);return T=function(){return e},e}function I(){var e=Object(s.a)(["\n  background-color: ",";\n  min-height: 100vh;\n  font-family: 'Righteous', cursive;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  position: relative;\n"]);return I=function(){return e},e}var N=p.b.div(I(),(function(e){return e.theme.backgroundWrapper})),A=p.b.h1(T(),(function(e){return e.theme.mainHeading})),L=p.b.div(z()),R=p.b.span(F(),(function(e){return e.theme.textColor})),G=function(){var e=Object.keys(j),t=e[Object(O.random)(e.length-1)];return{currentShape:t,currentDirection:Object(O.random)(Object.keys(j[t]).length-1)}},_=function(e){var t=Object(O.cloneDeep)(e),n=t.filter((function(e){return!e.userControl&&!e.isFalling}));return{cellPositionWithShape:t.filter((function(e){return e.userControl&&e.isFalling})),cellPositionWithoutShape:n}},K=function(e,t){var n=t.filter((function(t){return function(e,t){return e.filter((function(e){return e.top+1===t.top&&e.left===t.left})).length>0}(e,t)})).length>0,o=e.filter((function(e){return e.top+1===y.rows})).length>0,r=n||o,i=t.filter((function(t){return function(e,t){return e.filter((function(e){return e.top===t.top&&e.left-1===t.left})).length>0}(e,t)})).length>0,a=e.filter((function(e){return e.left-1<0})).length>0,c=i||a,l=t.filter((function(t){return function(e,t){return e.filter((function(e){return e.top===t.top&&e.left+1===t.left})).length>0}(e,t)})).length>0,u=e.filter((function(e){return e.left+1>=y.columns})).length>0;return{isBottomCollusion:r,isLeftCollusion:c,isRightCollusion:l||u,isOverlapsed:e.filter((function(e){return e.left<0||e.left>=y.columns||e.top>=y.rows||t.filter((function(t){return t.left===e.left&&t.top===e.top})).length>0})).length>0}},q=function(e){if(0===e.length)return{};var t=e[0].left,n=e[0].top,o=e[0].left,r=e[0].top;return e.forEach((function(e){e.left<t&&(t=e.left),e.top<n&&(n=e.top),e.left>o&&(o=e.left),e.top>r&&(r=e.top)})),{xMin:t,yMin:n,xMax:o,yMax:r,color:e[0].color}},H=function(e,t,n){var o=q(e),r=t.filter((function(e){return e.left>=o.xMin&&e.left<=o.xMax})),i=q(r);if(!i.yMin||!i.yMax)return P(n.currentShape,n.currentDirection,o.xMin,y.rows-1-(o.yMax-o.yMin),o.color);for(var a=[],c=i.yMin-(o.yMax-o.yMin+1);c<i.yMin+(o.yMax-o.yMin);c++){var l=P(n.currentShape,n.currentDirection,o.xMin,c,o.color);if(K(l,r).isBottomCollusion){a=l;break}}return a},J=function(e){var t=Object.keys(Object(O.keyBy)(e.filter((function(e){return e.isDestroying})),(function(e){return e.top}))).reverse();e=e.filter((function(e){return!e.isDestroying}));for(var n=[],o=function(o){var r=e.filter((function(e){return e.top===o}));if(0===r.length)return"continue";var i=t.filter((function(e){return o<e})).length,a=r.map((function(e){return Object(u.a)({},e,{top:e.top+i})}));n.push.apply(n,Object(c.a)(a))},r=y.rows-1;r>0;r--)o(r);return n},U=G,X=_,$=K,Q=H,V=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n={},o=[],r=_([].concat(Object(c.a)(e),Object(c.a)(t))),i=r.cellPositionWithShape,a=r.cellPositionWithoutShape,l=Object(c.a)(a);return l.forEach((function(e){n[e.top]?n[e.top]+=1:n[e.top]=1})),Object.keys(n).forEach((function(e){n[e]===y.columns&&o.push(parseInt(e))})),o.length>0?(l=l.map((function(e){return Object(u.a)({},e,{isDestroying:o.includes(e.top)})})),[].concat(Object(c.a)(l),Object(c.a)(i))):[].concat(Object(c.a)(a),Object(c.a)(i))},Y=function(e,t,n,o,r){if(!e.isBottomCollusion||e.isBottomCollusion&&!t.isPrepareOnGround){if(!e.isLeftCollusion&&n.left&&n.controlSpeedStep>=y.controlSpeed)o.cellPositionWithShape=o.cellPositionWithShape.map((function(e){return Object(u.a)({},e,{left:e.left-1})})),r(H(o.cellPositionWithShape,o.cellPositionWithoutShape,t)),n.controlSpeedStep=0;if(!e.isRightCollusion&&n.right&&n.controlSpeedStep>=y.controlSpeed)o.cellPositionWithShape=o.cellPositionWithShape.map((function(e){return Object(u.a)({},e,{left:e.left+1})})),r(H(o.cellPositionWithShape,o.cellPositionWithoutShape,t)),n.controlSpeedStep=0}},Z=function(e,t,n,o,r,i,a){if(n.down){var l;o.isCaculatePoint=!0;var s=t.map((function(t,n){return Object(u.a)({},t,{isFalling:!1,userControl:!1,id:e.cellPositionWithShape[n].id})}));e.cellPositionWithShape=s;var p=G();r.currentShape=p.currentShape,r.currentDirection=p.currentDirection;var f=P(r.currentShape,r.currentDirection),h=H(f,[].concat(Object(c.a)(e.cellPositionWithoutShape),Object(c.a)(e.cellPositionWithShape)),r);(l=e.cellPositionWithShape).push.apply(l,Object(c.a)(f)),i(h),a(!0),n.down=!1}},ee=function(e,t,n,o){if(t.rotate&&t.controlSpeedStep>=y.controlSpeed){t.controlSpeedStep=0;var r=(n.currentDirection+1)%Object.keys(j[n.currentShape]).length,i=q(e.cellPositionWithShape),a=i.xMin,l=i.yMin,u=i.color,s=function(e){var t=_(e),n=t.cellPositionWithShape,o=t.cellPositionWithoutShape;return K(n,o).isOverlapsed?null:n}([].concat(Object(c.a)(e.cellPositionWithoutShape),Object(c.a)(P(n.currentShape,r,a,l,u,!0))));if(null!==s)n.currentDirection=r,e.cellPositionWithShape=s,o(H(e.cellPositionWithShape,e.cellPositionWithoutShape,n))}},te=function(e,t,n,o,r){if(e.cellPositionWithoutShape.filter((function(e){return e.isDestroying})).length>0){if(t.delayStep>=y.delayTime){e.cellPositionWithoutShape=J(e.cellPositionWithoutShape),o(H(e.cellPositionWithShape,e.cellPositionWithoutShape,n));var i=[].concat(Object(c.a)(e.cellPositionWithoutShape),Object(c.a)(e.cellPositionWithShape));return t.delayStep=0,r(i)}t.delayStep+=y.fps}},ne=function(e,t,n,o,r){if(t.fallStep+=y.fps,t.fallStep>=y.fallSpeed)if(t.fallStep=0,n.isBottomCollusion)if(o.isPrepareOnGround){var i;t.isCaculatePoint=!0,e.cellPositionWithShape=e.cellPositionWithShape.map((function(e){return Object(u.a)({},e,{isFalling:!1,userControl:!1})}));var a=G();o.currentShape=a.currentShape,o.currentDirection=a.currentDirection;var l=P(o.currentShape,o.currentDirection),s=H(l,[].concat(Object(c.a)(e.cellPositionWithoutShape),Object(c.a)(e.cellPositionWithShape)),o);(i=e.cellPositionWithShape).push.apply(i,Object(c.a)(l)),r(s),o.isPrepareOnGround=!1}else o.isPrepareOnGround=!0;else e.cellPositionWithShape=e.cellPositionWithShape.map((function(e){return Object(u.a)({},e,{isFalling:!0,top:e.top+1})})),o.isPrepareOnGround=!1};function oe(){var e=Object(s.a)(["\n  display: none;\n\n  &:focus + ","{\n    box-shadow: 0 0 1px #2196F3;\n  }\n\n  &:checked + ",":before {\n    transform: translateX(16px);\n  }\n"]);return oe=function(){return e},e}function re(){var e=Object(s.a)(["\n  position: absolute;\n  cursor: pointer;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: ",';\n  -webkit-transition: .4s;\n  transition: .4s;\n  border-radius: 34px;\n\n  &:before{\n    position: absolute;\n    content: "";\n    height: 18px;\n    width: 18px;\n    left: 3px;\n    bottom: 3px;\n    background-color: white;\n    transition: .4s;\n    border-radius: 50%;\n  }\n']);return re=function(){return e},e}function ie(){var e=Object(s.a)(["\n  position: relative;\n  display: inline-block;\n  width: 40px;\n  height: 24px;\n  margin: 0;\n"]);return ie=function(){return e},e}var ae=p.b.label(ie()),ce=p.b.div(re(),(function(e){return e.value?"#1E81AE":"#ccc"})),le=p.b.input(oe(),ce,ce),ue=function(e){return r.a.createElement(ae,null,r.a.createElement(le,Object.assign({},e,{type:"checkbox",disabled:e.readOnly})),r.a.createElement(ce,{value:e.value}))},se=function(e){return r.a.createElement(L,null,r.a.createElement("div",{className:"d-flex align-items-center"},r.a.createElement(R,{className:"mr-2"},"Light:"),r.a.createElement(ue,e)))},pe=n(42),fe=n(9),he=function(e){var t=e.handleKeyDown,n=e.handleKeyUp,o=function(e){return function(){return t({keyCode:e})}},i=function(e){return function(){return n({keyCode:e})}};return r.a.createElement("div",{className:"d-flex justify-content-between mt-3 mx-3"},r.a.createElement("div",null,r.a.createElement(pe.a,{className:"mr-3 py-2 px-3",outline:!0,color:"info",type:"button",onTouchEnd:i(37),onTouchStart:o(37)},r.a.createElement(fe.b,null)),r.a.createElement(pe.a,{className:"py-2 px-3",outline:!0,color:"info",type:"button",onTouchEnd:i(39),onTouchStart:o(39)},r.a.createElement(fe.c,null))),r.a.createElement("div",null,r.a.createElement(pe.a,{className:"mr-3 py-2 px-3",outline:!0,color:"info",type:"button",onTouchEnd:i(40),onTouchStart:o(40)},r.a.createElement(fe.a,null)),r.a.createElement(pe.a,{className:"py-2 px-3",outline:!0,color:"info",type:"button",onTouchEnd:i(38),onTouchStart:o(38)},r.a.createElement(fe.d,null))))},de={fallStep:0,isCaculatePoint:!1,delayStep:0},me=Object(u.a)({isPrepareOnGround:!1},U()),Se=P(me.currentShape,me.currentDirection),be={left:!1,right:!1,rotate:!1,down:!1,controlSpeedStep:y.controlSpeed};var ge=function(){var e=Object(o.useState)(Se),t=Object(l.a)(e,2),n=t[0],i=t[1],a=Object(o.useState)(!1),u=Object(l.a)(a,2),s=u[0],f=u[1],h=Object(o.useState)(Q(Se,[],me)),d=Object(l.a)(h,2),m=d[0],S=d[1];Object(o.useEffect)((function(){var e=setInterval((function(){var e=X(n);te(e,de,me,S,i);var t=$(e.cellPositionWithShape,e.cellPositionWithoutShape);Y(t,me,be,e,S),ne(e,de,t,me,S),Z(e,m,be,de,me,S,f),ee(e,be,me,S);var o=[].concat(Object(c.a)(e.cellPositionWithoutShape),Object(c.a)(e.cellPositionWithShape));de.isCaculatePoint&&(o=V(o),de.isCaculatePoint=!1),i(o)}),y.fps);return function(){clearInterval(e)}}),[n,m]);var b=function(e){switch(console.log(e.keyCode),e.keyCode){case 37:be.left=!0,be.controlSpeedStep+=y.fps;break;case 39:be.right=!0,be.controlSpeedStep+=y.fps;break;case 38:be.rotate=!0,be.controlSpeedStep+=y.fps;break;case 40:be.down=!0}},g=function(e){switch(console.log(e.keyCode),e.keyCode){case 37:be.left=!1,be.controlSpeedStep=y.controlSpeed;break;case 39:be.right=!1,be.controlSpeedStep=y.controlSpeed;break;case 38:be.rotate=!1,be.controlSpeedStep+=y.controlSpeed}};Object(o.useEffect)((function(){return window.addEventListener("keydown",b),window.addEventListener("keyup",g),function(){window.removeEventListener("keydown",b),window.addEventListener("keyup",g)}}),[]);var v=Object(o.useState)(localStorage.getItem("theme")||C),O=Object(l.a)(v,2),j=O[0],E=O[1],P=j===C;return r.a.createElement(p.a,{theme:B(j)},r.a.createElement(N,null,r.a.createElement(se,{value:P,onChange:function(){var e=j!==C?C:M;localStorage.setItem("theme",e),E(e)},isReadOnly:!0}),r.a.createElement(k.a,{className:"App px-0"},r.a.createElement(A,{className:"text-center"},"TERIS RACE"),r.a.createElement(x,{gameSettings:y,cellsPosition:n,shadowShapePosition:m,isShake:s,setShake:f}),r.a.createElement(he,{handleKeyUp:g,handleKeyDown:b}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(r.a.createElement(ge,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[23,1,2]]]);
//# sourceMappingURL=main.a6633b96.chunk.js.map