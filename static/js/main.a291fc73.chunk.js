(this["webpackJsonpteris-test"]=this["webpackJsonpteris-test"]||[]).push([[0],{200:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),i=n(72),a=n.n(i),c=(n(86),n(87),n(88),n(2)),l=n(17),u=n(5),s=n(4),p=n(3);function f(){var e=Object(s.a)(["\n  width: ","px;\n  height: ","px;\n  position: absolute;\n  background: ",";\n  transition: left .3s ease, top .15s ease;\n  opacity: ",";\n  animation: "," 0.45s cubic-bezier(0.165, 0.840, 0.440, 1.000) both;\n"]);return f=function(){return e},e}function h(){var e=Object(s.a)(["\n  width: ","px;\n  height: ","px;\n  position: relative;\n  background-color: ",";\n  margin: auto;\n  animation: "," 0.3s linear;\n  overflow: hidden;\n"]);return h=function(){return e},e}function d(){var e=Object(s.a)(["\n  0% {\n    transform: scale(1);\n    filter: blur(0px);\n    opacity: 1;\n  }\n  100% {\n    transform: scale(2);\n    filter: blur(4px);\n    opacity: 0;\n  }\n"]);return d=function(){return e},e}function m(){var e=Object(s.a)(["\n  0% {\n    transform: translate(0);\n  }\n  20% {\n    transform: translate(-2px, 2px);\n  }\n  40% {\n    transform: translate(-2px, -2px);\n  }\n  60% {\n    transform: translate(2px, 2px);\n  }\n  80% {\n    transform: translate(2px, -2px);\n  }\n  100% {\n    transform: translate(0);\n  }\n"]);return m=function(){return e},e}var S,b=Object(p.c)(m()),g=Object(p.c)(d()),v={MainBoard:p.b.div(h(),(function(e){return e.cellSize*e.columns}),(function(e){return e.cellSize*e.rows}),(function(e){return e.theme.backgroundMainBoard}),(function(e){return e.isShake&&b})),MainBoard__cell:p.b.div.attrs((function(e){return{style:{top:e.position.top&&e.position.top*e.cellSize+"px",left:e.position.left&&e.position.left*e.cellSize+"px",right:e.position.right&&e.position.right*e.cellSize+"px",bottom:e.position.bottom&&e.position.bottom*e.cellSize+"px"}}}))(f(),(function(e){return e.cellSize}),(function(e){return e.cellSize}),(function(e){return e.position.color}),(function(e){return e.isShadow?.2:1}),(function(e){return e.position.isDestroying&&g}))},x=function(e){var t=Object(o.useRef)(null),n=!!(window.innerWidth<=991&&t.current)&&t.current.clientWidth,i=n?(n-30)/e.gameSettings.columns:e.gameSettings.cellSize,a=Object(u.a)({},e.gameSettings,{cellSize:i});return r.a.createElement("div",{ref:t},r.a.createElement(v.MainBoard,Object.assign({},a,{isShake:e.isShake,onAnimationEnd:function(){return e.setShake(!1)}}),e.cellsPosition.map((function(e){return r.a.createElement(v.MainBoard__cell,Object.assign({key:e.id},a,{position:e}))})),e.shadowShapePosition.map((function(e){return r.a.createElement(v.MainBoard__cell,Object.assign({key:"shadow-".concat(e.id)},a,{position:e,isShadow:!0}))}))))},O=(n(93),n(46)),y=n.n(O),j={t:{0:{matrix:[[1,1,1],[0,1,0]],center:[0,1]},1:{matrix:[[0,1],[1,1],[0,1]],center:[1,1]},2:{matrix:[[0,1,0],[1,1,1]],center:[1,1]},3:{matrix:[[1,0],[1,1],[1,0]],center:[1,0]}},l:{0:{matrix:[[1,1,1],[0,0,1]],center:[0,1]},1:{matrix:[[0,1],[0,1],[1,1]],center:[1,1]},2:{matrix:[[1,0,0],[1,1,1]],center:[1,1]},3:{matrix:[[1,1],[1,0],[1,0]],center:[1,0]}},i:{0:{matrix:[[1,1,1,1]],center:[0,1]},1:{matrix:[[1],[1],[1],[1]],center:[1,0]}},o:{0:{matrix:[[1,1],[1,1]],center:[0,0]}},j:{0:{matrix:[[1,1,1],[1,0,0]],center:[0,1]},1:{matrix:[[1,1],[0,1],[0,1]],center:[1,1]},2:{matrix:[[0,0,1],[1,1,1]],center:[1,1]},3:{matrix:[[1,0],[1,0],[1,1]],center:[1,0]}},z:{0:{matrix:[[1,1,0],[0,1,1]],center:[0,1]},1:{matrix:[[0,1],[1,1],[1,0]],center:[1,1]},2:{matrix:[[1,1,0],[0,1,1]],center:[1,1]},3:{matrix:[[0,1],[1,1],[1,0]],center:[1,0]}},s:{0:{matrix:[[0,1,1],[1,1,0]],center:[0,1]},1:{matrix:[[1,0],[1,1],[0,1]],center:[1,1]},2:{matrix:[[0,1,1],[1,1,0]],center:[1,1]},3:{matrix:[[1,0],[1,1],[0,1]],center:[1,0]}}},E={cellSize:25,columns:16,rows:24,fallSpeed:500,controlSpeed:60,fps:60,delayTime:50},P=["#A848E3","#E4E250","#F6A8DE","#ABE124","#D04D41","#F20B35","#2ED8DB","#1708EF","#F6847E","#FCB01E","#39FBBD","#6FFA14"],k=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:E.columns/2-1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4?arguments[4]:void 0,i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=P[Math.round(Math.random()*(P.length-1))],c=j[e],l=c[t],u=l.center,s=t-1>=0?t-1:Object.keys(c).length-1,p=c[s],f=p.center,h=0,d=0;i&&(h=f[0]-u[0],d=f[1]-u[1]);for(var m=l.matrix,S=[],b=0;b<m.length;b++)for(var g=m[b],v=0;v<g.length;v++){var x=g[v];1===x&&S.push({top:o+b+h,left:n+v+d,isFalling:!0,userControl:!0,direction:t,color:r||a,id:y()(y()("shape-")+"-")})}return S},w=n(201),W={backgroundWrapper:["#fff","#222831"],backgroundMainBoard:["#eeeeee","#393e46"],title:["#00adb5","#00adb5"],mainHeading:["#00adb5","#00adb5"],textColor:["#222831","#eeeeee"]},C=n(15),M="light",D="dark",B=(S={},Object(C.a)(S,M,0),Object(C.a)(S,D,1),S),F=function(e){var t={},n=B[e];return Object.keys(W).forEach((function(e){t[e]=W[e][n]})),t};function z(){var e=Object(s.a)(["\n  color: ",";\n"]);return z=function(){return e},e}function T(){var e=Object(s.a)(["\n  position: fixed;\n  top: 10px;\n  right: 10px;\n"]);return T=function(){return e},e}function N(){var e=Object(s.a)(["\n  color: ",";\n  @media screen and (max-width: 991px){\n    font-size: 22px;\n  }\n"]);return N=function(){return e},e}function A(){var e=Object(s.a)(["\n  background-color: ",";\n  min-height: 100vh;\n  font-family: 'Righteous', cursive;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  position: relative;\n"]);return A=function(){return e},e}var I=p.b.div(A(),(function(e){return e.theme.backgroundWrapper})),L=p.b.h1(N(),(function(e){return e.theme.mainHeading})),R=p.b.div(T()),G=p.b.span(z(),(function(e){return e.theme.textColor})),_=n(47),K=n.n(_),H=n(77),J=n.n(H),U=n(78),X=n.n(U),$=function(){var e=Object.keys(j),t=e[K()(e.length-1)];return{currentShape:t,currentDirection:K()(Object.keys(j[t]).length-1)}},q=function(e){var t=J()(e),n=t.filter((function(e){return!e.userControl&&!e.isFalling}));return{cellPositionWithShape:t.filter((function(e){return e.userControl&&e.isFalling})),cellPositionWithoutShape:n}},Q=function(e,t){var n=t.filter((function(t){return function(e,t){return e.filter((function(e){return e.top+1===t.top&&e.left===t.left})).length>0}(e,t)})).length>0,o=e.filter((function(e){return e.top+1===E.rows})).length>0,r=n||o,i=t.filter((function(t){return function(e,t){return e.filter((function(e){return e.top===t.top&&e.left-1===t.left})).length>0}(e,t)})).length>0,a=e.filter((function(e){return e.left-1<0})).length>0,c=i||a,l=t.filter((function(t){return function(e,t){return e.filter((function(e){return e.top===t.top&&e.left+1===t.left})).length>0}(e,t)})).length>0,u=e.filter((function(e){return e.left+1>=E.columns})).length>0;return{isBottomCollusion:r,isLeftCollusion:c,isRightCollusion:l||u,isOverlapsed:e.filter((function(e){return e.left<0||e.left>=E.columns||e.top>=E.rows||t.filter((function(t){return t.left===e.left&&t.top===e.top})).length>0})).length>0}},V=function(e){if(0===e.length)return{};var t=e[0].left,n=e[0].top,o=e[0].left,r=e[0].top;return e.forEach((function(e){e.left<t&&(t=e.left),e.top<n&&(n=e.top),e.left>o&&(o=e.left),e.top>r&&(r=e.top)})),{xMin:t,yMin:n,xMax:o,yMax:r,color:e[0].color}},Y=function(e,t,n){var o=V(e),r=t.filter((function(e){return e.left>=o.xMin&&e.left<=o.xMax})),i=V(r);if(!i.yMin||!i.yMax)return k(n.currentShape,n.currentDirection,o.xMin,E.rows-1-(o.yMax-o.yMin),o.color);for(var a=[],c=i.yMin-(o.yMax-o.yMin+1);c<i.yMin+(o.yMax-o.yMin);c++){var l=k(n.currentShape,n.currentDirection,o.xMin,c,o.color);if(Q(l,r).isBottomCollusion){a=l;break}}return a},Z=function(e){var t=Object.keys(X()(e.filter((function(e){return e.isDestroying})),(function(e){return e.top}))).reverse();e=e.filter((function(e){return!e.isDestroying}));for(var n=[],o=function(o){var r=e.filter((function(e){return e.top===o}));if(0===r.length)return"continue";var i=t.filter((function(e){return o<e})).length,a=r.map((function(e){return Object(u.a)({},e,{top:e.top+i})}));n.push.apply(n,Object(c.a)(a))},r=E.rows-1;r>0;r--)o(r);return n},ee=$,te=q,ne=Q,oe=Y,re=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n={},o=[],r=q([].concat(Object(c.a)(e),Object(c.a)(t))),i=r.cellPositionWithShape,a=r.cellPositionWithoutShape,l=Object(c.a)(a);return l.forEach((function(e){n[e.top]?n[e.top]+=1:n[e.top]=1})),Object.keys(n).forEach((function(e){n[e]===E.columns&&o.push(parseInt(e))})),o.length>0?(l=l.map((function(e){return Object(u.a)({},e,{isDestroying:o.includes(e.top)})})),[].concat(Object(c.a)(l),Object(c.a)(i))):[].concat(Object(c.a)(a),Object(c.a)(i))},ie=function(e,t,n,o,r){if(!e.isBottomCollusion||e.isBottomCollusion&&!t.isPrepareOnGround){if(!e.isLeftCollusion&&n.left&&n.controlSpeedStep>=E.controlSpeed)o.cellPositionWithShape=o.cellPositionWithShape.map((function(e){return Object(u.a)({},e,{left:e.left-1})})),r(Y(o.cellPositionWithShape,o.cellPositionWithoutShape,t)),n.controlSpeedStep=0;if(!e.isRightCollusion&&n.right&&n.controlSpeedStep>=E.controlSpeed)o.cellPositionWithShape=o.cellPositionWithShape.map((function(e){return Object(u.a)({},e,{left:e.left+1})})),r(Y(o.cellPositionWithShape,o.cellPositionWithoutShape,t)),n.controlSpeedStep=0}},ae=function(e,t,n,o,r,i,a){if(n.down){var l;o.isCaculatePoint=!0;var s=t.map((function(t,n){return Object(u.a)({},t,{isFalling:!1,userControl:!1,id:e.cellPositionWithShape[n].id})}));e.cellPositionWithShape=s;var p=$();r.currentShape=p.currentShape,r.currentDirection=p.currentDirection;var f=k(r.currentShape,r.currentDirection),h=Y(f,[].concat(Object(c.a)(e.cellPositionWithoutShape),Object(c.a)(e.cellPositionWithShape)),r);(l=e.cellPositionWithShape).push.apply(l,Object(c.a)(f)),i(h),a(!0),n.down=!1}},ce=function(e,t,n,o){if(t.rotate&&t.controlSpeedStep>=E.controlSpeed){t.controlSpeedStep=0;var r=(n.currentDirection+1)%Object.keys(j[n.currentShape]).length,i=V(e.cellPositionWithShape),a=i.xMin,l=i.yMin,u=i.color,s=function(e){var t=q(e),n=t.cellPositionWithShape,o=t.cellPositionWithoutShape;return Q(n,o).isOverlapsed?null:n}([].concat(Object(c.a)(e.cellPositionWithoutShape),Object(c.a)(k(n.currentShape,r,a,l,u,!0))));if(null!==s)n.currentDirection=r,e.cellPositionWithShape=s,o(Y(e.cellPositionWithShape,e.cellPositionWithoutShape,n))}},le=function(e,t,n,o,r){if(e.cellPositionWithoutShape.filter((function(e){return e.isDestroying})).length>0){if(t.delayStep>=E.delayTime){e.cellPositionWithoutShape=Z(e.cellPositionWithoutShape),o(Y(e.cellPositionWithShape,e.cellPositionWithoutShape,n));var i=[].concat(Object(c.a)(e.cellPositionWithoutShape),Object(c.a)(e.cellPositionWithShape));return t.delayStep=0,r(i)}t.delayStep+=E.fps}},ue=function(e,t,n,o,r){if(t.fallStep+=E.fps,t.fallStep>=E.fallSpeed)if(t.fallStep=0,n.isBottomCollusion)if(o.isPrepareOnGround){var i;t.isCaculatePoint=!0,e.cellPositionWithShape=e.cellPositionWithShape.map((function(e){return Object(u.a)({},e,{isFalling:!1,userControl:!1})}));var a=$();o.currentShape=a.currentShape,o.currentDirection=a.currentDirection;var l=k(o.currentShape,o.currentDirection),s=Y(l,[].concat(Object(c.a)(e.cellPositionWithoutShape),Object(c.a)(e.cellPositionWithShape)),o);(i=e.cellPositionWithShape).push.apply(i,Object(c.a)(l)),r(s),o.isPrepareOnGround=!1}else o.isPrepareOnGround=!0;else e.cellPositionWithShape=e.cellPositionWithShape.map((function(e){return Object(u.a)({},e,{isFalling:!0,top:e.top+1})})),o.isPrepareOnGround=!1};function se(){var e=Object(s.a)(["\n  display: none;\n\n  &:focus + ","{\n    box-shadow: 0 0 1px #2196F3;\n  }\n\n  &:checked + ",":before {\n    transform: translateX(16px);\n  }\n"]);return se=function(){return e},e}function pe(){var e=Object(s.a)(["\n  position: absolute;\n  cursor: pointer;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: ",';\n  -webkit-transition: .4s;\n  transition: .4s;\n  border-radius: 34px;\n\n  &:before{\n    position: absolute;\n    content: "";\n    height: 18px;\n    width: 18px;\n    left: 3px;\n    bottom: 3px;\n    background-color: white;\n    transition: .4s;\n    border-radius: 50%;\n  }\n']);return pe=function(){return e},e}function fe(){var e=Object(s.a)(["\n  position: relative;\n  display: inline-block;\n  width: 40px;\n  height: 24px;\n  margin: 0;\n"]);return fe=function(){return e},e}var he=p.b.label(fe()),de=p.b.div(pe(),(function(e){return e.value?"#1E81AE":"#ccc"})),me=p.b.input(se(),de,de),Se=function(e){return r.a.createElement(he,null,r.a.createElement(me,Object.assign({},e,{type:"checkbox",disabled:e.readOnly})),r.a.createElement(de,{value:e.value}))},be=function(e){return r.a.createElement(R,null,r.a.createElement("div",{className:"d-flex align-items-center"},r.a.createElement(G,{className:"mr-2"},"Light:"),r.a.createElement(Se,e)))},ge=n(202),ve=n(16),xe=function(e){var t=e.handleKeyDown,n=e.handleKeyUp,o=function(e){return function(){return t({keyCode:e})}},i=function(e){return function(){return n({keyCode:e})}};return r.a.createElement("div",{className:"d-flex justify-content-between mt-3 mx-3"},r.a.createElement("div",null,r.a.createElement(ge.a,{className:"mr-3 py-3 px-4",outline:!0,color:"info",type:"button",onTouchEnd:i(37),onTouchStart:o(37)},r.a.createElement(ve.b,null)),r.a.createElement(ge.a,{className:"py-3 px-4",outline:!0,color:"info",type:"button",onTouchEnd:i(39),onTouchStart:o(39)},r.a.createElement(ve.c,null))),r.a.createElement("div",null,r.a.createElement(ge.a,{className:"mr-3 py-3 px-4",outline:!0,color:"info",type:"button",onTouchEnd:i(40),onTouchStart:o(40)},r.a.createElement(ve.a,null)),r.a.createElement(ge.a,{className:"py-3 px-4",outline:!0,color:"info",type:"button",onTouchEnd:i(38),onTouchStart:o(38)},r.a.createElement(ve.d,null))))},Oe={fallStep:0,isCaculatePoint:!1,delayStep:0},ye=Object(u.a)({isPrepareOnGround:!1},ee()),je=k(ye.currentShape,ye.currentDirection),Ee={left:!1,right:!1,rotate:!1,down:!1,controlSpeedStep:E.controlSpeed};var Pe=function(){var e=Object(o.useState)(je),t=Object(l.a)(e,2),n=t[0],i=t[1],a=Object(o.useState)(!1),u=Object(l.a)(a,2),s=u[0],f=u[1],h=Object(o.useState)(oe(je,[],ye)),d=Object(l.a)(h,2),m=d[0],S=d[1];Object(o.useEffect)((function(){var e=setInterval((function(){var e=te(n);le(e,Oe,ye,S,i);var t=ne(e.cellPositionWithShape,e.cellPositionWithoutShape);ie(t,ye,Ee,e,S),ue(e,Oe,t,ye,S),ae(e,m,Ee,Oe,ye,S,f),ce(e,Ee,ye,S);var o=[].concat(Object(c.a)(e.cellPositionWithoutShape),Object(c.a)(e.cellPositionWithShape));Oe.isCaculatePoint&&(o=re(o),Oe.isCaculatePoint=!1),i(o)}),E.fps);return function(){clearInterval(e)}}),[n,m]);var b=function(e){switch(console.log(e.keyCode),e.keyCode){case 37:Ee.left=!0,Ee.controlSpeedStep+=E.fps;break;case 39:Ee.right=!0,Ee.controlSpeedStep+=E.fps;break;case 38:Ee.rotate=!0,Ee.controlSpeedStep+=E.fps;break;case 40:Ee.down=!0}},g=function(e){switch(console.log(e.keyCode),e.keyCode){case 37:Ee.left=!1,Ee.controlSpeedStep=E.controlSpeed;break;case 39:Ee.right=!1,Ee.controlSpeedStep=E.controlSpeed;break;case 38:Ee.rotate=!1,Ee.controlSpeedStep+=E.controlSpeed}};Object(o.useEffect)((function(){return window.addEventListener("keydown",b),window.addEventListener("keyup",g),function(){window.removeEventListener("keydown",b),window.addEventListener("keyup",g)}}),[]);var v=Object(o.useState)(localStorage.getItem("theme")||M),O=Object(l.a)(v,2),y=O[0],j=O[1],P=y===M;return r.a.createElement(p.a,{theme:F(y)},r.a.createElement(I,null,r.a.createElement(be,{value:P,onChange:function(){var e=y!==M?M:D;localStorage.setItem("theme",e),j(e)},isReadOnly:!0}),r.a.createElement(w.a,{className:"App px-0"},r.a.createElement(L,{className:"text-center"},"TERIS RACE"),r.a.createElement(x,{gameSettings:E,cellsPosition:n,shadowShapePosition:m,isShake:s,setShake:f}),r.a.createElement(xe,{handleKeyUp:g,handleKeyDown:b}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(r.a.createElement(Pe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},81:function(e,t,n){e.exports=n(200)},88:function(e,t,n){},93:function(e,t,n){}},[[81,1,2]]]);
//# sourceMappingURL=main.a291fc73.chunk.js.map